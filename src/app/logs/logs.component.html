<p></p>
<div *ngIf="maintenanceMode" class="alert alert-danger col-sm-6">
  <span><h1>Сервер находится в режиме обслуживания</h1></span>
</div>

<h3>Логи</h3>
<p></p>
<div>
  <section class="filter-wrapper">
    <div class="keyword-wrapper">
      <input [formControl]="queryField" id="keyword" type="text" autofocus
             placeholder="Введите имя либо почту пользователя"/>
    </div>
    <ul class="filter-select" style="margin-left: 0; padding-left: 0;">
      <li *ngFor="let user of results" style="list-style-type: none" class="filter-select-list">
        <a (click)="selectUser(user)">
          <p>
            <span class="artist-name">{{user.fio||user.email||user.phone}}</span></p>
        </a>
      </li>
    </ul>
  </section>

</div>
<label></label>
<div class="row">
  <div>
    <span *ngIf="user">{{user.fio||user.email||user.phone}}</span>
    <button [disabled]="!user" type="button" class="btn btn-info btn-sm" style="margin-left: 5px"
            (click)="getSmsLogs()">Логи запросов SMS
    </button>
    <button [disabled]="!user" type="button" class="btn btn-info btn-sm" style="margin-left: 5px"
            (click)="getAcquiringLogs()">Логи запросов интернет-эквайринга
    </button>
  </div>
</div>
<label></label>
<div [ngSwitch]="isAuthenticated()">
  <div [hidden]="!showSmsLogs" *ngSwitchCase="true" infiniteScroll [infiniteScrollDistance]="2"
       [infiniteScrollThrottle]="50" [scrollWindow]="false" style="height: 500px; overflow-y: auto;">
    <table class="table">
      <thead>
      <tr>
        <th scope="col">Дата</th>
        <th scope="col">Тип запроса</th>
        <th scope="col">Результат выполнения</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let sms of smsLogs">
        <td>{{sms.date}}</td>
        <td>{{sms.type}}</td>
        <td>{{sms.result}}</td>
      </tr>
      </tbody>
    </table>
  </div>

  <label></label>
  <div [ngSwitch]="isAuthenticated()">
    <div [hidden]="!showAcquiringLogs" *ngSwitchCase="true" infiniteScroll [infiniteScrollDistance]="2"
         [infiniteScrollThrottle]="50" [scrollWindow]="false" style="height: 500px; overflow-y: auto;">

      <table class="table">
        <thead>
        <tr>
          <th scope="col">Дата</th>
          <th scope="col">Тип запроса</th>
          <th scope="col">OrderID</th>
          <th scope="col">Результат выполнения</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let sms of acquiringLogs">
          <td>{{sms.date|date:'dd.MM.yy'}}</td>
          <td>{{sms.type}}</td>
          <td>{{sms.id_order}}</td>
          <td>{{sms.result}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
